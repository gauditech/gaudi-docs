---
sidebar_position: 2
---

# APIs

APIs are used to expose your data and interact with the outside world (eg. your frontend, clients, ...). Gaudi lets you create REST APIs base on your data model. They are designed to offer a predictable behavior with very little code, which can be customized when needed, or extended with `hooks`.

Using your API definition Gaudi can automatically generate OpenAPI specification and client integration libraries that help you try out, test and integrate your API from day one.

## Defining endpoints

The concept of an API revolves around, `api`, `entrypoint` and `endpoint` blocks.

Entrypoint is a group of endpoints which operate on the same data model. Several `entrypoint`s can be grouped into an `api` block.

Endpoints represent specific REST endpoints. Gaudi supports five "built-in" endpoints, and a custom one:

- `create` - uses HTTP `POST`, for creating a new record
- `list` - uses HTTP `GET`, for returning a list of records
- `get` - uses HTTP `GET`, for returning a single record
- `update` - uses HTTP `PATCH`, for updating a single record
- `delete` - uses HTTP `DELETE`, for deleting a single record
- `custom` - completely customizable endpoint

Here is a short example of an api specification:

```javascript
api {
  entrypoint Topic {
    create endpoint {} // POST /api/topic/
    get endpoint {}    // GET /api/topic/{id}/
    custom endpoint {  // POST /api/topic/search/
      POST many "/search"
      ...
    }
    custom endpoint {  // POST /api/topic/{id}/disable/
      POST one "/disable"
      ...
    }
  }
}
```

## Identifying specific records

Some endpoints operate on a whole collection of records, such as:

- `create` endpoint
- `list` endpoint
- `custom` endpoint with `many` cardinality

Others operate on a single record, such as:

- `get` endpoint
- `update` endpoint
- `delete` endpoint
- `custom` endpoint with `one` cardinality

This reflects in an URL for each type of endpoint.

#### Collection endpoints

Collection endpoints require only data model name

```
/api/topic
```

#### Single endpoints

Single endpoints require both data model name and record identifier

```
/api/topic/{identifier}
```

In order to look up a specific record, by default Gaudi expects a record identifier in the URL path. By default, Gaudi uses autogenerated `id` field, but this can be customized using `identify` property.

```
entrypoint Topic {
  identify { through name }
}
```

## Response schema

Each `entrypoint` is based on a single data model (_target_) and each `endpoint` returns some part of this target model. You can use `response` block to define which part of the target model is returned. `response` can be specified per `entrypoint` or per `endpoint`.

```javascript
api {
  entrypoint Topic {
    response { id, title, author { id, username, profile { imageUrl } } }
  }
}
```

By default, all the fields on the target model will be included. This is also true for relationship fields without its own block.

```
// includes ALL fields of "author" relation
response { id, title, author }

// includes only "name" of "author" relation
response { id, title, author { name } }
```

## Request body schema

Endpoints that contain `create` or `update` actions may need to accept certain values from the client, via request body. Gaudi analyses the endpoint specification and computes the desired request schema.

Read more in [Actions](./actions.md)
